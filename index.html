<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlindGuard — Assistive Wearable Dashboard</title>
    <meta name="description" content="Real-time monitoring dashboard for BlindGuard distributed assistive wearable system">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ===== HEADER ===== -->
    <header id="app-header">
        <div class="header-left">
            <div class="logo">
                <svg class="logo-icon" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="14" stroke="url(#logoGrad)" stroke-width="2.5"/>
                    <path d="M10 16 L14 20 L22 12" stroke="url(#logoGrad)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <defs>
                        <linearGradient id="logoGrad" x1="0" y1="0" x2="32" y2="32">
                            <stop offset="0%" stop-color="#06b6d4"/>
                            <stop offset="100%" stop-color="#8b5cf6"/>
                        </linearGradient>
                    </defs>
                </svg>
                <h1>BlindGuard</h1>
            </div>
            <span class="header-subtitle">Assistive Wearable System</span>
        </div>

        <div class="header-right">
            <div id="connection-status" class="status-badge disconnected">
                <span class="status-dot"></span>
                <span id="status-text">Disconnected</span>
            </div>
            <button id="btn-demo" class="btn btn-secondary" title="Toggle Demo Mode">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M3 2l10 6-10 6V2z"/></svg>
                Demo
            </button>
            <button id="btn-connect" class="btn btn-primary" title="Connect via Serial">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a2 2 0 0 1 2 2v2H6V3a2 2 0 0 1 2-2zm3 4V3a3 3 0 1 0-6 0v2H3.5A1.5 1.5 0 0 0 2 6.5v7A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 12.5 5H11z"/></svg>
                Connect
            </button>
        </div>
    </header>

    <!-- ===== MAIN GRID ===== -->
    <main id="dashboard">

        <!-- ---- STATUS CARDS ROW ---- -->
        <section class="status-cards">
            <div class="card stat-card" id="card-esp32">
                <div class="stat-icon esp32-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="4" width="16" height="16" rx="3"/><circle cx="12" cy="12" r="3"/><line x1="12" y1="1" x2="12" y2="4"/><line x1="12" y1="20" x2="12" y2="23"/><line x1="1" y1="12" x2="4" y2="12"/><line x1="20" y1="12" x2="23" y2="12"/></svg>
                </div>
                <div class="stat-info">
                    <span class="stat-label">ESP32 Status</span>
                    <span class="stat-value" id="esp32-status">Offline</span>
                </div>
                <div class="stat-indicator offline" id="esp32-indicator"></div>
            </div>

            <div class="card stat-card" id="card-esp8266">
                <div class="stat-icon esp8266-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="3"/><circle cx="12" cy="18" r="1"/></svg>
                </div>
                <div class="stat-info">
                    <span class="stat-label">ESP8266 Link</span>
                    <span class="stat-value" id="esp8266-status">No Signal</span>
                </div>
                <div class="stat-indicator offline" id="esp8266-indicator"></div>
            </div>

            <div class="card stat-card" id="card-falls">
                <div class="stat-icon fall-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v6m0 4v10M5 12h14"/><circle cx="12" cy="12" r="10"/></svg>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Falls Detected</span>
                    <span class="stat-value counter" id="fall-count">0</span>
                </div>
            </div>

            <div class="card stat-card" id="card-obstacles">
                <div class="stat-icon obstacle-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Obstacle Alerts</span>
                    <span class="stat-value counter" id="obstacle-count">0</span>
                </div>
            </div>
        </section>

        <!-- ---- ACCELEROMETER CHART ---- -->
        <section class="card chart-card" id="accel-section">
            <div class="card-header">
                <h2>Accelerometer</h2>
                <div class="chart-legend">
                    <span class="legend-item"><span class="legend-dot" style="background:#06b6d4"></span>Total</span>
                    <span class="legend-item"><span class="legend-dot" style="background:#8b5cf6"></span>X</span>
                    <span class="legend-item"><span class="legend-dot" style="background:#22d3ee"></span>Y</span>
                    <span class="legend-item"><span class="legend-dot" style="background:#a78bfa"></span>Z</span>
                </div>
                <div class="accel-live">
                    <span class="accel-value" id="accel-live-value">0.00</span>
                    <span class="accel-unit">g</span>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="accel-canvas"></canvas>
            </div>
        </section>

        <!-- ---- BOTTOM ROW: GPS + EVENT LOG ---- -->
        <section class="bottom-row">

            <!-- GPS Panel -->
            <div class="card gps-card" id="gps-section">
                <div class="card-header">
                    <h2>GPS Location</h2>
                    <div class="gps-fix-status" id="gps-fix-badge">
                        <span class="status-dot"></span>
                        <span id="gps-fix-text">No Fix</span>
                    </div>
                </div>
                <div class="gps-body">
                    <div class="gps-coords">
                        <div class="gps-field">
                            <span class="gps-label">LAT</span>
                            <span class="gps-value" id="gps-lat">—</span>
                        </div>
                        <div class="gps-field">
                            <span class="gps-label">LNG</span>
                            <span class="gps-value" id="gps-lng">—</span>
                        </div>
                    </div>
                    <div class="gps-map-placeholder" id="gps-map">
                        <svg viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
                            <circle cx="32" cy="24" r="8"/>
                            <path d="M32 56 L32 32"/>
                            <path d="M20 40 L32 56 L44 40"/>
                        </svg>
                        <span>Location pin will update with GPS fix</span>
                    </div>
                </div>
            </div>

            <!-- Event Log -->
            <div class="card log-card" id="log-section">
                <div class="card-header">
                    <h2>Event Log</h2>
                    <button class="btn btn-ghost" id="btn-clear-log" title="Clear log">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor"><path d="M4 1v1H1v1h12V2h-3V1H4zM2 5v7a2 2 0 002 2h6a2 2 0 002-2V5H2z"/></svg>
                        Clear
                    </button>
                </div>
                <div class="log-container" id="log-container">
                    <div class="log-empty">
                        <span>No events yet. Connect to device or start demo mode.</span>
                    </div>
                </div>
            </div>

        </section>

    </main>

    <!-- ===== FOOTER ===== -->
    <footer id="app-footer">
        <span>BlindGuard v1.0</span>
        <span class="footer-sep">·</span>
        <span id="uptime">Uptime: —</span>
        <span class="footer-sep">·</span>
        <span id="packet-count">Packets: 0</span>
    </footer>

    <script src="main.js"></script>
</body>
</html>
